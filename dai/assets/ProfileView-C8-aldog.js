import{G as M,x as P,r as g,z as j,c as n,h as x,e as s,b as e,g as u,w as C,t as i,d as m,v as p,n as c,H as D,i as S,m as h,F as _,l as F,o as a}from"./index-B23mCz-Z.js";import{u as G}from"./user-BR_oR6gt.js";import{H as T,U as I,T as z}from"./Header-NSWx_pzJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={key:0,class:"bg-gradient-to-br from-blue-50 to-indigo-100"},L={class:"container mx-auto py-10 px-4 md:px-6"},O={class:"max-w-2xl mx-auto"},$={class:"bg-white rounded-lg shadow-md p-6"},B={class:"flex justify-center mb-6"},H={class:"flex flex-col items-center gap-4"},R={class:"relative"},q={class:"h-32 w-32 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center"},J=["src"],K={key:1,class:"text-gray-400 text-2xl"},Q={key:0,class:"text-red-500 text-sm mt-1"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={key:0,class:"text-red-500 text-sm mt-1"},Y={key:0,class:"text-red-500 text-sm mt-1"},Z={key:0,class:"text-red-500 text-sm mt-1"},ee={key:0,class:"text-red-500 text-sm mt-1"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},re={key:0,class:"text-red-500 text-sm mt-1"},oe={key:0,class:"text-red-500 text-sm mt-1"},se={key:0,class:"text-red-500 text-sm mt-1"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},de={key:0,class:"text-red-500 text-sm mt-1"},ne={key:0,class:"text-red-500 text-sm mt-1"},ae={key:0,class:"text-red-500 text-sm mt-1"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ue={key:0,class:"text-red-500 text-sm mt-1"},me={key:0,class:"text-red-500 text-sm mt-1"},ce={key:0,class:"text-red-500 text-sm mt-1"},pe=["disabled"],fe={key:0,class:"fixed bottom-4 left-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg"},be={key:1,class:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6"},ge={class:"w-full max-w-md space-y-8"},xe={class:"text-center"},ye={class:"relative mx-auto w-24 h-24 mb-6"},ve={class:"absolute inset-2 rounded-full bg-white shadow-lg flex items-center justify-center"},he={class:"absolute -bottom-2 left-1/2 transform -translate-x-1/2"},_e={class:"bg-white rounded-full px-3 py-1 shadow-lg border"},we={class:"text-sm font-semibold text-slate-700"},ke={class:"space-y-2"},Ne={class:"w-full bg-slate-200 rounded-full h-3 overflow-hidden"},Ee={class:"flex justify-center space-x-2"},Ce={__name:"ProfileView",setup(Ue,{expose:w}){const r=G(),o=M({avatar:"",firstName:"",lastName:"",email:"",email_personal:"",phone:"",gender:"",address:"",birthday:"",dpi:"",nit:"",city:"",department:"",country:""}),k=P(()=>{var d;return"http://172.23.53.85/auditoria/public/storage/"+((d=r.record)==null?void 0:d.profile_picture_url)}),y=g(0),b=g(!1),N=g(!1),E=g("");w({progress:y});const U=()=>{let d=!0;if(Object.keys(o).forEach(f=>{o[f]=""}),(!r.record.name||r.record.name.length<2)&&(o.firstName="El nombre debe tener al menos 2 caracteres.",d=!1),(!r.record.last_name||r.record.last_name.length<2)&&(o.lastName="El apellido debe tener al menos 2 caracteres.",d=!1),!r.record.date_of_birth)o.birthday="La fecha de nacimiento es obligatoria.",d=!1;else{const f=new Date(r.record.date_of_birth);(isNaN(f.getTime())||f.toISOString().slice(0,10)!==r.record.date_of_birth)&&(o.birthday="La fecha debe ser válida y en formato AAAA-MM-DD.",d=!1)}const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!r.record.email||!t.test(r.record.email))&&(o.email="Por favor ingresa un correo electrónico válido.",d=!1);const v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return(!r.record.email_personal||!v.test(r.record.email_personal))&&(o.email_personal="Por favor ingresa un correo electrónico válido.",d=!1),(!r.record.phone_number||r.record.phone_number.length<8)&&(o.phone="El número de teléfono debe tener al menos 8 dígitos.",d=!1),(!r.record.gender||r.record.gender.length<1)&&(o.gender="El Genero es requerido.",d=!1),(!r.record.dpi||r.record.dpi.length!==13)&&(o.dpi="El número de CUI debe tener 13 dígitos.",d=!1),(!r.record.nit||r.record.nit.length<3)&&(o.nit="El número de NIT debe tener al menos 3 dígitos.",d=!1),(!r.record.address||r.record.address.length<5)&&(o.address="La dirección debe tener al menos 5 caracteres.",d=!1),(!r.record.city||r.record.city.length<4)&&(o.city="El municipio debe tener al menos 4 caracteres.",d=!1),(!r.record.department||r.record.department.length<4)&&(o.department="El departamento debe tener al menos 4 caracteres.",d=!1),(!r.record.country||r.record.country.length<4)&&(o.country="El pais debe tener al menos 4 caracteres.",d=!1),d},V=async()=>{if(U()){b.value=!0;try{await r.update()}catch(d){console.error("Error al enviar el formulario:",d)}finally{b.value=!1}}};return j(()=>{r.show()}),(d,t)=>{var f;const v=S("Errors");return a(),n(_,null,[x(T),s(r).loadingRecord?(a(),n("div",be,[e("div",ge,[e("div",xe,[e("div",ye,[t[28]||(t[28]=e("div",{class:"absolute inset-0 rounded-full border-4 border-slate-200"},null,-1)),t[29]||(t[29]=e("div",{class:"absolute inset-0 rounded-full border-4 border-transparent border-t-blue-500 animate-spin",style:{"animation-duration":"2s"}},null,-1)),e("div",ve,[x(s(I),{class:"w-8 h-8 text-slate-600"})]),e("div",he,[e("div",_e,[e("span",we,i(Math.round(y.value))+"%",1)])])]),t[30]||(t[30]=e("h2",{class:"text-2xl font-bold text-slate-800 mb-2"},"Cargando Perfil",-1)),t[31]||(t[31]=e("p",{class:"text-slate-600"},"Preparando tu información personal",-1))]),e("div",ke,[e("div",Ne,[e("div",{class:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full transition-all duration-300 ease-out relative",style:h({width:`${y.value}%`})},t[32]||(t[32]=[e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"},null,-1)]),4)])]),e("div",Ee,[(a(),n(_,null,F(5,l=>e("div",{key:l,class:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:h({animationDelay:`${(l-1)*.15}s`,animationDuration:"1.2s"})},null,4)),64))]),t[33]||(t[33]=e("div",{class:"text-center"},[e("p",{class:"text-sm text-slate-500 animate-pulse"},"Cargando datos del perfil...")],-1))])])):(a(),n("div",A,[e("div",L,[e("div",O,[t[27]||(t[27]=e("h1",{class:"text-3xl font-bold mb-6 text-center"},"Perfil de Usuario",-1)),e("div",$,[e("form",{onSubmit:C(V,["prevent"]),class:"space-y-6"},[e("div",B,[e("div",H,[e("div",R,[e("div",q,[(f=s(r).record)!=null&&f.profile_picture_url?(a(),n("img",{key:0,src:k.value,alt:"Foto de perfil",class:"h-full w-full object-cover"},null,8,J)):(a(),n("span",K,"?"))])]),o.avatar?(a(),n("p",Q,i(o.avatar),1)):u("",!0)])]),e("div",W,[e("div",null,[t[13]||(t[13]=e("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nombres",-1)),m(e("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=l=>s(r).record.name=l),type:"text",placeholder:"Juan",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.firstName}]),readonly:"",disabled:""},null,2),[[p,s(r).record.name]]),o.firstName?(a(),n("p",X,i(o.firstName),1)):u("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"},"Apellidos",-1)),m(e("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=l=>s(r).record.last_name=l),type:"text",placeholder:"Pérez",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.lastName}]),disabled:""},null,2),[[p,s(r).record.last_name]]),o.lastName?(a(),n("p",Y,i(o.lastName),1)):u("",!0)])]),e("div",null,[t[15]||(t[15]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"Correo Electrónico Municipal",-1)),m(e("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=l=>s(r).record.email=l),type:"email",placeholder:"juan.perez@ejemplo.com",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.email}]),disabled:""},null,2),[[p,s(r).record.email]]),o.email?(a(),n("p",Z,i(o.email),1)):u("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de nacimiento",-1)),m(e("input",{id:"phone","onUpdate:modelValue":t[3]||(t[3]=l=>s(r).record.date_of_birth=l),type:"date",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.birthday}])},null,2),[[p,s(r).record.date_of_birth]]),o.birthday?(a(),n("p",ee,i(o.birthday),1)):u("",!0)]),e("div",te,[e("div",null,[t[17]||(t[17]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},"Teléfono",-1)),m(e("input",{id:"phone","onUpdate:modelValue":t[4]||(t[4]=l=>s(r).record.phone_number=l),type:"text",placeholder:"12345678",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.phone}])},null,2),[[p,s(r).record.phone_number]]),o.phone?(a(),n("p",re,i(o.phone),1)):u("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"},"Genero",-1)),m(e("select",{class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.gender}]),"onUpdate:modelValue":t[5]||(t[5]=l=>s(r).record.gender=l)},t[18]||(t[18]=[e("option",{disabled:"",selected:""},"--Seleccione--",-1),e("option",{value:"M"},"MASCULINO",-1),e("option",{value:"F"},"FEMENIMO",-1)]),2),[[D,s(r).record.gender]]),o.gender?(a(),n("p",oe,i(o.gender),1)):u("",!0)])]),e("div",null,[t[20]||(t[20]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"Correo Electrónico Personal",-1)),m(e("input",{id:"email","onUpdate:modelValue":t[6]||(t[6]=l=>s(r).record.email_personal=l),type:"email",placeholder:"juan.perez@ejemplo.com",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.email_personal}])},null,2),[[p,s(r).record.email_personal]]),o.email_personal?(a(),n("p",se,i(o.email_personal),1)):u("",!0)]),e("div",le,[e("div",null,[t[21]||(t[21]=e("label",{for:"dpi",class:"block text-sm font-medium text-gray-700 mb-1"},"DPI",-1)),m(e("input",{id:"dpi","onUpdate:modelValue":t[7]||(t[7]=l=>s(r).record.dpi=l),type:"text",placeholder:"10100101",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.dpi}])},null,2),[[p,s(r).record.dpi]]),o.dpi?(a(),n("p",de,i(o.dpi),1)):u("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{for:"nit",class:"block text-sm font-medium text-gray-700 mb-1"},"NIT",-1)),m(e("input",{id:"nit","onUpdate:modelValue":t[8]||(t[8]=l=>s(r).record.nit=l),type:"text",placeholder:"1111-1",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.nit}])},null,2),[[p,s(r).record.nit]]),o.nit?(a(),n("p",ne,i(o.nit),1)):u("",!0)])]),e("div",null,[t[23]||(t[23]=e("label",{for:"address",class:"block text-sm font-medium text-gray-700 mb-1"},"Dirección",-1)),m(e("input",{id:"address","onUpdate:modelValue":t[9]||(t[9]=l=>s(r).record.address=l),type:"text",placeholder:"Calle Principal #123",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.address}])},null,2),[[p,s(r).record.address]]),o.address?(a(),n("p",ae,i(o.address),1)):u("",!0)]),e("div",ie,[e("div",null,[t[24]||(t[24]=e("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 mb-1"},"Municipio",-1)),m(e("input",{id:"firstName","onUpdate:modelValue":t[10]||(t[10]=l=>s(r).record.city=l),type:"text",placeholder:"Guatemala",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.city}])},null,2),[[p,s(r).record.city]]),o.city?(a(),n("p",ue,i(o.city),1)):u("",!0)]),e("div",null,[t[25]||(t[25]=e("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"},"Departamento",-1)),m(e("input",{id:"lastName","onUpdate:modelValue":t[11]||(t[11]=l=>s(r).record.department=l),type:"text",placeholder:"Guatemala",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.department}])},null,2),[[p,s(r).record.department]]),o.department?(a(),n("p",me,i(o.department),1)):u("",!0)])]),e("div",null,[t[26]||(t[26]=e("label",{for:"address",class:"block text-sm font-medium text-gray-700 mb-1"},"Pais",-1)),m(e("input",{id:"address","onUpdate:modelValue":t[12]||(t[12]=l=>s(r).record.country=l),type:"text",placeholder:"Guatemala",class:c(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":o.country}])},null,2),[[p,s(r).record.country]]),o.country?(a(),n("p",ce,i(o.country),1)):u("",!0)]),e("button",{type:"submit",class:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",disabled:b.value},i(b.value?"Guardando...":"Guardar Perfil"),9,pe)],32)])]),N.value?(a(),n("div",fe,i(E.value),1)):u("",!0),x(v,{errors:s(r).validationErrors},null,8,["errors"])])])),x(z)],64)}}};export{Ce as default};
