import{k as z,u as F,r as i,x as l,c as u,h as d,b as e,g as b,e as o,w as q,d as h,f as _,p as c,m as D,n as k,t as C,s as L,i as U,F as $,o as a}from"./index-DAMx5fR-.js";import{H as j,T as H}from"./Header-Sdo9yF7V.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as P}from"./eye-CjntLDP_.js";import{I as O}from"./info-Cb2sl0OM.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=z("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=z("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=z("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),J={class:"bg-gradient-to-br from-blue-50 to-indigo-100"},K={class:"container mx-auto py-10 px-4 md:px-6"},Q={class:"w-[60%] mx-auto"},R={class:"bg-white shadow rounded-lg"},X={class:"px-6 py-6"},Y={key:0,class:"mb-6 flex items-center p-4 bg-green-50 border border-green-200 rounded-lg"},ee={class:"relative"},se=["type"],te={class:"relative"},re=["type"],oe={key:0,class:"mt-2"},ae={class:"flex items-center space-x-2"},ne={class:"flex-1 bg-gray-200 rounded-full h-2"},le={class:"relative"},ie=["type"],ue={key:0,class:"mt-1 text-sm text-red-600"},de={key:0,class:"flex items-center p-4 bg-red-50 border border-red-200 rounded-lg"},ce={class:"text-sm text-red-700"},fe={class:"flex justify-end space-x-3 pt-4"},me=["disabled"],pe={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},be={class:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4"},we={class:"flex"},ge={__name:"ChangePasswordView",setup(ye){const t=F(),w=i(!1),g=i(!1),y=i(!1),f=i(!1),m=i(""),v=i(!1),x=l(()=>t.newPassword===t.newPasswordConfirmation),p=l(()=>{const r=t.newPassword;let s=0;return r.length>=8&&s++,/[a-z]/.test(r)&&s++,/[A-Z]/.test(r)&&s++,/[0-9]/.test(r)&&s++,/[^A-Za-z0-9]/.test(r)&&s++,s}),E=l(()=>{const r=p.value;return r<=2?"Débil":r<=3?"Media":r<=4?"Fuerte":"Muy fuerte"}),M=l(()=>{const r=p.value;return r<=2?"bg-red-500":r<=3?"bg-yellow-500":r<=4?"bg-green-500":"bg-green-600"}),A=l(()=>{const r=p.value;return r<=2?"text-red-600":r<=3?"text-yellow-600":r<=4?"text-green-600":"text-green-700"}),N=l(()=>`${p.value/5*100}%`),T=l(()=>t.currentPassword&&t.newPassword&&t.newPasswordConfirmation&&x.value&&p.value>=3),I=async()=>{f.value=!0,m.value="",v.value=!1;try{await t.changePassword()&&(v.value=!0,V(),setTimeout(()=>{v.value=!1},5e3))}catch{m.value="Error al actualizar la contraseña. Inténtalo de nuevo."}finally{f.value=!1}},V=()=>{t.currentPassword="",t.newPassword="",t.newPasswordConfirmation="",m.value=""};return(r,s)=>{const B=U("Errors");return a(),u($,null,[d(j),e("div",J,[e("div",K,[e("div",Q,[e("div",R,[s[10]||(s[10]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Cambiar contraseña"),e("p",{class:"mt-1 text-sm text-gray-600"}," Actualiza tu contraseña para mantener tu cuenta segura ")],-1)),e("div",X,[v.value?(a(),u("div",Y,[d(o(G),{class:"w-5 h-5 text-green-600 mr-3"}),s[6]||(s[6]=e("div",null,[e("p",{class:"text-sm font-medium text-green-800"}," ¡Contraseña actualizada! "),e("p",{class:"text-sm text-green-700"}," Tu contraseña ha sido cambiada exitosamente. ")],-1))])):b("",!0),e("form",{onSubmit:q(I,["prevent"]),class:"space-y-6"},[e("div",null,[s[7]||(s[7]=e("label",{for:"current-password",class:"block text-sm font-medium text-gray-700 mb-2"}," Contraseña actual ",-1)),e("div",ee,[h(e("input",{id:"current-password","onUpdate:modelValue":s[0]||(s[0]=n=>o(t).currentPassword=n),type:w.value?"text":"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",required:""},null,8,se),[[_,o(t).currentPassword]]),e("button",{type:"button",onClick:s[1]||(s[1]=n=>w.value=!w.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[w.value?(a(),c(o(S),{key:1,class:"h-4 w-4 text-gray-400"})):(a(),c(o(P),{key:0,class:"h-4 w-4 text-gray-400"}))])])]),e("div",null,[s[8]||(s[8]=e("label",{for:"new-password",class:"block text-sm font-medium text-gray-700 mb-2"}," Nueva contraseña ",-1)),e("div",te,[h(e("input",{id:"new-password","onUpdate:modelValue":s[2]||(s[2]=n=>o(t).newPassword=n),type:g.value?"text":"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",required:""},null,8,re),[[_,o(t).newPassword]]),e("button",{type:"button",onClick:s[3]||(s[3]=n=>g.value=!g.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[g.value?(a(),c(o(S),{key:1,class:"h-4 w-4 text-gray-400"})):(a(),c(o(P),{key:0,class:"h-4 w-4 text-gray-400"}))])]),o(t).newPassword?(a(),u("div",oe,[e("div",ae,[e("div",ne,[e("div",{class:k(["h-2 rounded-full transition-all duration-300",M.value]),style:D({width:N.value})},null,6)]),e("span",{class:k(["text-xs font-medium",A.value])},C(E.value),3)])])):b("",!0)]),e("div",null,[s[9]||(s[9]=e("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirmar nueva contraseña ",-1)),e("div",le,[h(e("input",{id:"confirm-password","onUpdate:modelValue":s[4]||(s[4]=n=>o(t).newPasswordConfirmation=n),type:y.value?"text":"password",class:k(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",{"border-red-300 focus:ring-red-500 focus:border-red-500":o(t).newPasswordConfirmation&&!x.value}]),required:""},null,10,ie),[[_,o(t).newPasswordConfirmation]]),e("button",{type:"button",onClick:s[5]||(s[5]=n=>y.value=!y.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[y.value?(a(),c(o(S),{key:1,class:"h-4 w-4 text-gray-400"})):(a(),c(o(P),{key:0,class:"h-4 w-4 text-gray-400"}))])]),o(t).newPasswordConfirmation&&!x.value?(a(),u("p",ue," Las contraseñas no coinciden ")):b("",!0)]),m.value?(a(),u("div",de,[d(o(W),{class:"w-5 h-5 text-red-600 mr-3"}),e("p",ce,C(m.value),1)])):b("",!0),e("div",fe,[e("button",{type:"button",onClick:V,class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancelar "),e("button",{type:"submit",disabled:!T.value||f.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[f.value?(a(),u("div",pe)):b("",!0),L(" "+C(f.value?"Actualizando...":"Actualizar contraseña"),1)],8,me)])],32)])]),d(B,{errors:o(t).validationErrors},null,8,["errors"]),e("div",be,[e("div",we,[d(o(O),{class:"h-5 w-5 text-blue-400 mt-0.5"}),s[11]||(s[11]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-blue-800"}," Consejos para una contraseña segura "),e("div",{class:"mt-2 text-sm text-blue-700"},[e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,"Usa al menos 8 caracteres"),e("li",null,"Incluye mayúsculas, minúsculas, números y símbolos"),e("li",null,"Evita información personal como nombres o fechas"),e("li",null,"No reutilices contraseñas de otras cuentas")])])],-1))])])])])]),d(H)],64)}}},Ce=Z(ge,[["__scopeId","data-v-8d40e52e"]]);export{Ce as default};
