import{K as R,I as T,r as e,y as M}from"./index-CwaQPSV_.js";import{u as h,h as d,a as B,s as K,l as U,b as F,d as G}from"./functions-BSmh5TsC.js";const q=R("maintenance",()=>{const s=T(),t=e([{title:"ID",align:"left",key:"id"},{title:"NOMBRE",align:"left",key:"NOMBRE"},{title:"SITIO",align:"end",key:"SITIO"},{title:"FOTO",align:"middle",key:"FOTO"},{title:"ESTADO",align:"middle",key:"ESTADO"},{title:"ACCIONES",align:"middle",key:"acciones",sort:!0}]);let y=e([]),i=e(null),o=e([]),x=e(!1),r=e([]),v=e(!1),n=e([]),f=e(!1),p=e([]),g=e(!1),m=e(!1),A=e(!1),w=e(!1),k=e(!1),E=e(!1),S=e(!1),I=e(!1);async function O(){v.value=!0,r.value=[];try{r.value=await h("supplies_measures"),r.value==null&&s.setAlert("Error al cargar los datos.","danger","Error")}catch(u){y.value="No se pudieron cargar los registros.",d(u,s.setAlert)}finally{v.value=!1}}async function N(){f.value=!0,n.value=[];try{n.value=await h("supplies_category"),n.value==null&&s.setAlert("Error al cargar los datos.","danger","Error")}catch(u){y.value="No se pudieron cargar los registros.",d(u,s.setAlert)}finally{f.value=!1}}async function b(){try{g.value=!0,p.value=[],p.value=await h("supplies_providers"),p.value==null&&s.setAlert("Error al cargar los datos.","danger","Error")}catch(u){y.value="No se pudieron cargar los registros.",d(u,s.setAlert)}finally{g.value=!1}}function D(u,l=null){switch(o.value=l,u){case value:break}m.value=!0}return{errors:y,headers:t,medidas:r,loading_medidas:v,categorias:n,loading_categorias:f,proveedores:p,loading_proveedores:g,registro:o,loading_registro:x,loading_opciones:m,id:i,opcion_editar:A,opcion_nuevo:w,opcion_eliminar:k,btn_editar:E,btn_nuevo:S,btn_eliminar:I,opciones:D,index_categoria:N,index_proveedor:b,index_medida:O}}),j=R("supply",()=>{const s=q(),t=T(),y=e([{title:"ID",align:"left",key:"id"},{title:"NOMBRE",align:"left",key:"name"},{title:"STOCK",align:"left",key:"stock"},{title:"STOCK MINIMO",align:"left",key:"minimum_stock"},{title:"CATEGORIA",align:"left",key:"category"},{title:"UNIDAD DE MEDIDA",align:"left",key:"measures"},{title:"ESTADO",align:"middle",key:"state_format"},{title:"ACCIONES",align:"middle",key:"actions",sort:!0}]);let i=e([]),o=e([]),x=e(null),r=e([]),v=e(!1),n=e([]),f=e(!1),p=e(!1),g=e(!1),m=e(!1),A=e(!1),w=e(!1),k=e(!1),E=e(!1),S=M({name:null,stock:null,minimum_stock:null,maximum_stock:null,provider_id:null,supply_category_id:null,measurement_unit_id:null,type_acquisition:null,expiration_date:null,description:null});function I(l,a=null){switch(r.value=a,l){case 1:m.value=!0,s.index_medida(),s.index_categoria(),s.index_proveedor();break;case 2:A.value=!0;break}p.value=!0}async function O(){f.value=!0,i.value="",n.value=[];try{n.value=await h("supplies"),n.value==null&&t.setAlert("Error al cargar los datos.","danger","Error")}catch(l){i.value="No se pudieron cargar los registros.",d(l,t.setAlert)}finally{f.value=!1}}async function N(){v.value=!0,i.value="",n.value=[];try{r.value=await B("supplies",x.value)}catch(l){i.value="No se pudieron cargar los registros.",d(l,t.setAlert)}finally{v.value=!1}}async function b(){var l,a;k.value=!0,i.value="",o.value=[];try{const _=await K.store("supplies",S,!1);return t.setAlert(((l=_.data)==null?void 0:l.message)||"Registro creado exitosamente.","success","Éxito"),m.value=!1,O(),U(S),!0}catch(c){return o.value=(a=c.response)==null?void 0:a.data.errors,d(c,t.setAlert),!1}finally{k.value=!1}}async function D(){var l;g.value=!0,i.value="",o.value=[];try{const a="supplies/"+r.value.id,c=await F.update(a,r.value,!1);return t.setAlert(((l=c.data)==null?void 0:l.message)||"Registro actualizado exitosamente.","success","Éxito"),!0}catch(a){return o.value=a.response.data.errors,d(a,t.setAlert),!1}finally{g.value=!1}}async function u(){var l,a,c;E.value=!0,i.value="",o.value=[];try{const _="supplies/"+r.value.id,C=await G.destroy(_);t.setAlert(((l=C.data)==null?void 0:l.message)||"Registro eliminado exitosamente.","success","Éxito"),A.value=!1,O()}catch(_){o.value=((c=(a=_.response)==null?void 0:a.data)==null?void 0:c.errors)||[],d(_,t.setAlert)}finally{E.value=!1}}return{errors:i,validationErrors:o,headers:y,records:n,loadingRecords:f,record:r,loadingRecord:v,loadingOptions:p,id:x,optionUpdate:g,optionNew:m,optionDelete:A,buttonUpdate:w,buttonNew:k,buttonDelete:E,newRecord:S,options:I,index:O,show:N,store:b,update:D,destroy:u}});export{q as a,j as u};
