import{y as S,H as E,C as B,B as K,D as N,c as p,h as a,b as s,g as y,i as c,e as r,w as $,E as u,d as b,G as V,x,X as j,l as C,j as M,o as g}from"./index-BRVX3OL0.js";import{u as R,a as D}from"./supply-DsrIHfYf.js";import{H as F}from"./Header-w4jQfehn.js";import{T as H}from"./Top-DcXz3ZAB.js";import{S as T}from"./save-BBjZ7M0T.js";import"./functions-B69Jx-_o.js";const I={class:"flex flex-col space-y-1"},z={class:"col-span-2"},A={class:"ml-2 col-span-3"},G={class:"flex gap-3 my-1.5"},O={class:"flex gap-1"},P={class:"flex gap-1"},X=["error-message"],J={key:0,class:"col-span-3 mt-3"},L={class:"col-span-3"},Q={class:"col-span-3 my-2"},W={class:"col-span-3 flex justify-between"},Y=["disabled"],Z=["disabled"],de={__name:"UpdateSupplyView",setup(h){const t=R(),f=M(),v=N(),l=D(),_=[{name:"Pagina principal",path:"http://172.23.53.149/dai/home",icon:"fas fa-home"},{name:"Suministros",path:"/supplies"},{name:"Actualizar suministro",path:""}],k=[{name:"arrendamiento"},{name:"compra"},{name:"donacion"},{name:"traslado"}],n=S({name:"",stock:null,minimum_stock:null,maximum_stock:null,supply_category_id:null,expiration_date:null,description:""});async function U(){await t.update()===!0&&f.push("/supplies")}const i=E(()=>!!t.record.expiration_date);return B(()=>v.params.id,m=>{console.log("Nuevo ID detectado:",m),t.id=m,t.show()}),K(()=>{t.id=v.params.id,t.show(),l.index_medida(),l.index_categoria(),l.index_proveedor()}),(m,e)=>{const w=c("Breadcrumbs"),d=c("Input"),q=c("Errors");return g(),p(C,null,[a(F),s("div",null,[a(w,{breadcrumbs:_,class:"mt-10 ml-5"}),r(t).loadingRecord?y("",!0):(g(),p("form",{key:0,class:"grid grid-cols-3 gap-0 mt-5 mx-5",onSubmit:e[17]||(e[17]=$(o=>U(),["prevent"]))},[s("div",I,[a(d,{title:"nombre",option:"label",modelValue:r(t).record.name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(t).record.name=o),type:"text",minlength:"3","error-message":n.name,maxlength:"100",onKeyup:e[1]||(e[1]=u(o=>r(t).record.name="",["esc"])),required:!0},null,8,["modelValue","error-message"])]),a(d,{title:"stock actual",option:"numeric",modelValue:r(t).record.stock,"onUpdate:modelValue":e[2]||(e[2]=o=>r(t).record.stock=o),required:"",type:"number",min:"0",onKeyup:e[3]||(e[3]=u(o=>r(t).record.stock="",["esc"])),"error-message":n.stock,disabled:"",readonly:""},null,8,["modelValue","error-message"]),a(d,{title:"stock minimo",option:"numeric",modelValue:r(t).record.minimum_stock,"onUpdate:modelValue":e[4]||(e[4]=o=>r(t).record.minimum_stock=o),required:"",type:"number",min:"1",onKeyup:e[5]||(e[5]=u(o=>r(t).record.minimum_stock="",["esc"])),"error-message":n.minimum_stock},null,8,["modelValue","error-message"]),a(d,{title:"stock maximo",option:"numeric",modelValue:r(t).record.maximum_stock,"onUpdate:modelValue":e[6]||(e[6]=o=>r(t).record.maximum_stock=o),required:"",type:"number",min:"1",onKeyup:e[7]||(e[7]=u(o=>r(t).record.maximum_stock="",["esc"])),"error-message":n.maximum_stock},null,8,["modelValue","error-message"]),a(d,{title:"proveedor",option:"select",modelValue:r(t).record.provider_id,"onUpdate:modelValue":e[8]||(e[8]=o=>r(t).record.provider_id=o),datos:r(l).proveedores,values:"id",names:"name",reduce:o=>o.id},null,8,["modelValue","datos","reduce"]),a(d,{title:"categoria",option:"select",modelValue:r(t).record.supply_category_id,"onUpdate:modelValue":e[9]||(e[9]=o=>r(t).record.supply_category_id=o),datos:r(l).categorias,values:"id",names:"name",required:!0,reduce:o=>o.id,"error-message":n.supply_category_id},null,8,["modelValue","datos","reduce","error-message"]),s("div",z,[a(d,{title:"unidad de medida",option:"select",modelValue:r(t).record.measurement_unit_id,"onUpdate:modelValue":e[10]||(e[10]=o=>r(t).record.measurement_unit_id=o),datos:r(l).medidas,values:"id",names:"name",required:!0,reduce:o=>o.id,loading:r(l).loading_medidas},null,8,["modelValue","datos","reduce","loading"])]),a(d,{title:"tipo de adquisición",option:"select",modelValue:r(t).record.type_acquisition,"onUpdate:modelValue":e[11]||(e[11]=o=>r(t).record.type_acquisition=o),datos:k,values:"name",names:"name",reduce:o=>o.name,required:!0,loading:!1},null,8,["modelValue","reduce"]),s("div",A,[e[20]||(e[20]=s("label",{class:"font-bold"},"¿El suministro tiene fecha de caducidad?",-1)),s("div",G,[s("div",O,[e[18]||(e[18]=s("label",null,"SÍ",-1)),b(s("input",{name:"fecha",type:"radio",value:"true","onUpdate:modelValue":e[12]||(e[12]=o=>i.value=o)},null,512),[[V,i.value]])]),s("div",P,[e[19]||(e[19]=s("label",null,"NO",-1)),b(s("input",{name:"fecha",type:"radio",value:"false","onUpdate:modelValue":e[13]||(e[13]=o=>i.value=o),"error-message":n.supply_category_id},null,8,X),[[V,i.value]])])])]),i.value===!0?(g(),p("div",J,[a(d,{option:"date",title:"Fecha de caducidad",modelValue:r(t).record.expiration_date,"onUpdate:modelValue":e[14]||(e[14]=o=>r(t).record.expiration_date=o),"error-message":n.expiration_date},null,8,["modelValue","error-message"])])):y("",!0),s("div",L,[a(d,{title:"descripción",option:"area",modelValue:r(t).record.description,"onUpdate:modelValue":e[15]||(e[15]=o=>r(t).record.description=o),required:"",minlength:"8",maxlength:"250",onKeyup:e[16]||(e[16]=u(o=>r(t).record.description="",["esc"]))},null,8,["modelValue"])]),s("div",Q,[a(q,{errors:r(t).validationErrors},null,8,["errors"])]),s("div",W,[s("button",{type:"button",disabled:r(t).buttonUpdate,class:"bg-red-500 rounded-xl text-white font-semibold px-2 py-1 flex items-center justify-center gap-1"},[e[21]||(e[21]=x("Cancelar ")),a(r(j),{class:"h-4 w-4"})],8,Y),s("button",{type:"submit",disabled:r(t).buttonUpdate,class:"bg-green-500 rounded-xl text-white font-semibold px-2 py-1 flex items-center justify-center gap-1 disabled:bg-slate-400 disabled:cursor-not-allowed"},[e[22]||(e[22]=x("Enviar ")),a(r(T),{class:"h-4 w-4"})],8,Z)])],32))]),a(H)],64)}}};export{de as default};
